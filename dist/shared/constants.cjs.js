"use strict";const m=r=>r.kind.endsWith("[]"),K=r=>m(r.attr),O=r=>r.kind!=="struct"&&!m(r),l=r=>r.kind==="struct",D=r=>r.kind==="struct[]",W=r=>r.attr.kind==="struct[]",p=r=>{var t;return((t=c[r.attr.kind])==null?void 0:t.hasText)===!0},b=r=>O(r)&&Y(r),Y=r=>c[r.kind].type==="number",f=r=>c[r.kind.replace("[]","")].type==="number",i={type:"string",hasText:!0},s={type:"number",hasText:!1},e={type:"number",hasText:!1},c={string:i,number:{type:"number",hasText:!1},boolean:{type:"boolean"},armor:s,actor:s,class:s,enemy:s,skill:s,state:s,item:s,weapon:s,common_event:s,switch:s,variable:s,troop:s,multiline_string:i,file:{type:"string",hasText:!1},"file[]":{type:"string",hasText:!1},"multiline_string[]":i,"string[]":i,combo:i,select:i,any:i,struct:{type:"struct"},"actor[]":e,"enemy[]":e,"class[]":e,"skill[]":e,"state[]":e,"item[]":e,"weapon[]":e,"common_event[]":e,"troop[]":e,"armor[]":e,"switch[]":e,"variable[]":e,"number[]":e};function _(r){return R(r,t=>!0,t=>!0)}const R=(r,t,a)=>{const u=[],d=[],y=[],A=[];return r.forEach(n=>{if(l(n.attr))u.push({name:n.name,attr:n.attr});else if(W(n))d.push(n);else if(K(n)){if(a(n))return void A.push(n)}else t(n)&&y.push(n)}),{structs:u,structArrays:d,scalars:y,scalarArrays:A}};function E(r){const t=r.map(a=>[a.name,a.attr]);return Object.fromEntries(t)}const h=r=>({...r.text?{text:r.text}:{},...r.desc?{desc:r.desc}:{}}),P=r=>Object.fromEntries(Object.entries(r).map(([t,a])=>[t,o(a)])),o=r=>{if(typeof r!="string")return r;try{const t=JSON.parse(r);return Array.isArray(t)?t.map(o):typeof t=="object"&&t!==null?Object.fromEntries(Object.entries(t).map(([a,u])=>[a,o(u)])):t}catch{return r}};exports.KEYWORD_ARG="arg",exports.KEYWORD_AUTHOR="author",exports.KEYWORD_BASE="base",exports.KEYWORD_DECIMALS="decimals",exports.KEYWORD_DEFAULT="default",exports.KEYWORD_DESC="desc",exports.KEYWORD_DIR="dir",exports.KEYWORD_HELP="help",exports.KEYWORD_KIND="kind",exports.KEYWORD_MAX="max",exports.KEYWORD_MIN="min",exports.KEYWORD_OFF="off",exports.KEYWORD_ON="on",exports.KEYWORD_OPTION="option",exports.KEYWORD_ORDERAFTER="orderAfter",exports.KEYWORD_ORDERBEFORE="orderBefore",exports.KEYWORD_PARAM="param",exports.KEYWORD_PARENT="parent",exports.KEYWORD_PLUGINDESC="plugindesc",exports.KEYWORD_STRUCT="struct",exports.KEYWORD_TARGET="target",exports.KEYWORD_TEXT="text",exports.KEYWORD_TYPE="type",exports.KEYWORD_URL="url",exports.KEYWORD_VALUE="value",exports.classifyFileParams=r=>R(r,t=>t.attr.kind==="file",t=>t.attr.kind==="file[]"),exports.classifyPluginParams=_,exports.classifyTextParams=r=>R(r,t=>p(t),t=>p(t)),exports.convertPluginCommandSchema=r=>({...h(r),command:r.command,args:E(r.args)}),exports.convertStructSchema=r=>({struct:r.struct,params:E(r.params)}),exports.createClassifiedStructMap=r=>new Map(r.map(t=>[t.struct,_(t.params)])),exports.createStructMap=r=>new Map(r.map(t=>[t.struct,t.params.map(a=>a.attr)])),exports.hasNumberValueParam=r=>m(r)?f(r):b(r),exports.hasScalarAttr=r=>O(r.attr),exports.hasStructAttr=r=>l(r.attr)||D(r.attr),exports.hasTextAttr=p,exports.isArrayAttr=K,exports.isArrayParam=m,exports.isArrayParamEx=(r,t)=>!!m(r)&&r.kind===`${t}[]`,exports.isFileAttr=r=>r.attr.kind==="file"||r.attr.kind==="file[]",exports.isNumberArrayParam=f,exports.isNumberAttr=r=>{var t;return((t=c[r.attr.kind])==null?void 0:t.type)==="number"},exports.isNumberValueParam=b,exports.isNumberValueParamEx=Y,exports.isScalarParam=O,exports.isStringArrayParam=r=>c[r.kind.replace("[]","")].type==="string",exports.isStringValueParam=r=>c[r.kind].type==="string",exports.isStructArrayAttr=W,exports.isStructArrayParam=D,exports.isStructAttr=r=>l(r.attr),exports.isStructParam=l,exports.isVariableAttr=r=>r.attr.kind==="variable"||r.attr.kind==="variable[]",exports.paramHasText=r=>{var t;return((t=c[r.kind])==null?void 0:t.hasText)===!0},exports.parseDeepJSON=r=>{const t=JSON.parse(r);return Array.isArray(t)?t.map(o):typeof t=="object"&&t!==null?P(t):t},exports.parseDeepRecord=r=>P(r),exports.toArrayPluginParam=r=>Object.entries(r).map(([t,a])=>({name:t,attr:a})),exports.toObjectPluginParams=function(r){const t=r.map(a=>[a.name,a.attr]);return Object.fromEntries(t)},exports.toObjectPluginParamsOld=E;
